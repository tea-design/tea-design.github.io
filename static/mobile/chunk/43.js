(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{"150":function(e,t,n){"use strict";n.d(t,"a",(function(){return Loading}));var a=n(14),r=n.n(a),c=n(131),o=n.n(c),i=n(143),l=n(136);function Loading(e){var t=e.vertical,n=e.size,a=e.color,c=e.className,u=e.style,s=void 0===u?{}:u,f=e.children;return r.a.createElement(i.a,{"className":o()("tea-loading",c,{"tea-loading--vertical":t}),"style":s},r.a.createElement(i.a,{"className":"tea-loading__icon","style":n?{"color":a,"width":"number"==typeof n?Object(l.a)(n,750):n,"height":"number"==typeof n?Object(l.a)(n,750):n}:{"color":a}},r.a.createElement(i.a,{"className":"tea-loading--circular"})),r.a.createElement(i.a,{"className":"tea-loading__text"},f))}},"181":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return useIsReady}));var a=n(7),r=n(14),c=n(27),o=n(26),i=function useReady(e){var t=Object(r.useRef)(!1);if(o.a){var n=function call(){t.current||(t.current=!0,e())};c.default.useReady((function(){n()})),Object(r.useEffect)((function(){c.default.nextTick((function(){n()}))}),[])}else Object(r.useEffect)((function(){e()}),[])};function useIsReady(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1];return i((function(){return c(!0)})),n}},"205":function(e,t,n){"use strict";n.d(t,"a",(function(){return getRect}));var a=n(27),r=n(26);function getRect(e,t){return new Promise((function(n,c){e.current?"weapp"===r.a?Object(a.createSelectorQuery)().selectAll("#".concat(e.current.uid).concat(t?" ".concat(t):"")).boundingClientRect(n).exec():n(t?Array.from(e.current.querySelectorAll(t)).map((function(e){return e.getBoundingClientRect()})):[e.current.getBoundingClientRect()]):c()}))}},"244":function(e,t,n){},"245":function(e,t,n){"use strict";n.d(t,"a",(function(){return SegmentedControl}));var a=n(132),r=n(133),c=n(14),o=n.n(c),i=n(131),l=n.n(i),u=n(143),s=n(137);function SegmentedControl(e){var t=Object(s.b)(e,0),n=t.values,c=t.value,i=t.onChange,f=t.className,d=Object(r.a)(t,["values","value","onChange","className"]);return o.a.createElement(u.a,Object(a.a)({"className":l()("tea-segmented-control",f,"count-".concat(n.length))},d),n.map((function(e,t){return o.a.createElement(u.a,{"key":t,"className":l()("tea-segmented-control__option",{"is-active":c===t}),"onClick":function onClick(e){i(t,{"event":e})}},o.a.createElement(u.a,{"className":"tea-segmented-control__option-inner"},e))})))}},"302":function(e,t,n){"use strict";n.r(t);var a=n(9),r=n(2),c=n(7),o=n(14),i=n.n(o),l=n(143),u=n(144),s=n(245),f=n(15),d=n.n(f),m=n(132),v=n(19),b=n(133),g=n(131),h=n.n(g),O=n(259),j=n(164),y=n(246),p=n.n(y),w={"y":"pageYOffset","x":"pageXOffset"},S={"y":"scrollTop","x":"scrollLeft"},E=function getScrollPosition(e){return window[w[e]]||document.documentElement[S[e]]||document.body[S[e]]||0},R=function PageScroller(e){var t=e.children,n=e.throttleTime,a=void 0===n?10:n,r=e.isGrid,c=void 0!==r&&r,i=Object(o.useRef)(),l=Object(o.useRef)();Object(o.useEffect)((function(){var e=p()((function(){var e=l.current||{"offsetTop":0,"offsetLeft":0},t=e.offsetTop,n=void 0===t?0:t,a=e.offsetLeft,r=void 0===a?0:a,o=E("y")-n,u=E("x")-r;c&&i.current&&i.current.scrollTo({"scrollLeft":u,"scrollTop":o}),c||i.current&&i.current.scrollTo(o)}),a);return window.addEventListener("scroll",e),function(){e.cancel(),window.removeEventListener("scroll",e)}}),[a,c]);var u=Object(o.useCallback)((function(e){var t=e.scrollLeft,n=e.scrollTop,a=e.scrollOffset;if(e.scrollUpdateWasRequested){var r=E("y"),o=E("x"),i=l.current||{"offsetTop":0,"offsetLeft":0},u=i.offsetTop,s=void 0===u?0:u,f=i.offsetLeft,d=void 0===f?0:f;a+=Math.min(r,s),n+=Math.min(r,s),t+=Math.min(o,d),c||a===r||window.scrollTo(0,a),!c||n===r&&t===o||window.scrollTo(t,n)}}),[c]);return t({"ref":i,"outerRef":l,"style":{"width":c?"auto":"100%","height":"100%","display":"inline-block"},"onScroll":u})},x=i.a.createContext({});var T=function VirtualList(e){var t=e.usePageScroll,n=e.renderBottom,a=Object(b.a)(e,["usePageScroll","renderBottom"]),r=Object(o.useMemo)((function(){return i.a.forwardRef((function(e,t){var n=e.children,a=Object(b.a)(e,["children"]),r=Object(o.useContext)(x),c=r.top,l=r.bottom;return i.a.createElement("div",Object(m.a)({"ref":t},a),c,n,l)}))}),[]);return t?i.a.createElement(x.Provider,{"value":{"bottom":n}},i.a.createElement(R,null,(function(e){var t=e.ref,n=e.outerRef,c=e.style,o=e.onScroll;return i.a.createElement(O.a,Object(m.a)({},a,{"ref":t,"outerRef":n,"height":window.innerHeight,"style":c,"onScroll":Object(j.a)(o,a.onScroll),"outerElementType":r}))}))):i.a.createElement(x.Provider,{"value":{"bottom":n}},i.a.createElement(O.a,Object(m.a)({},a,{"outerElementType":r})))},C=n(27),L=n(135),N=n(205),_=n(181),k=n(26),I=function getWindowHeight(){return"weapp"===k.a?Object(C.getSystemInfoSync)().windowHeight:window.innerHeight},B=function defaultRender(e){var t=e.style;return i.a.createElement(l.a,{"style":t})},P=function defaultKey(e,t){return t};function ListView(e){var t=e.itemData,n=void 0===t?[]:t,a=e.itemRender,u=void 0===a?B:a,s=e.itemSize,f=void 0===s?40:s,g=e.itemKey,O=void 0===g?P:g,y=e.usePageScroll,p=e.height,w=void 0===p?y?I():void 0:p,S=e.width,E=void 0===S?"100%":S,R=e.footer,x=e.onScroll,C=e.onScrollBottom,k=void 0===C?L.a:C,K=e.scrollBottomThreshold,z=void 0===K?10:K,V=e.useIsScrolling,A=e.overscanCount,D=(e.className,Object(b.a)(e,["itemData","itemRender","itemSize","itemKey","usePageScroll","height","width","footer","onScroll","onScrollBottom","scrollBottomThreshold","useIsScrolling","overscanCount","className"])),M=Object(o.useRef)(null),H=Object(o.useRef)(0),q=Object(_.a)();Object(o.useEffect)((function(){y&&"undefined"!=typeof window?H.current=I()||0:q&&Object(N.a)(M).then((function(e){var t=Object(c.a)(e,1)[0].height,n=void 0===t?0:t;H.current=n}))}),[w,y,q]);var J=Object(o.useCallback)((function(e){var t=e.data,n=e.index,a=Object(b.a)(e,["data","index"]);return u(Object(r.a)(Object(r.a)({},a),{},{"data":t[n]}))}),[u]),W={"itemKey":Object(o.useCallback)((function(e,t){return O(t[e],e)}),[O]),"usePageScroll":y};function _handleScroll(){return(_handleScroll=Object(v.a)(d.a.mark((function _callee(e){var t,a;return d.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:t=e.scrollDirection,a=e.scrollOffset,"forward"===t&&Math.ceil(a+H.current)>=n.length*f-z&&k(e);case 2:case"end":return r.stop()}}),_callee)})))).apply(this,arguments)}return i.a.createElement(l.a,Object(m.a)({"ref":M,"className":h()("tea-list-view",h.a)},D),i.a.createElement(T,Object(m.a)({"height":w,"width":E,"itemData":n,"itemCount":n.length,"itemSize":f,"useIsScrolling":V,"renderBottom":R,"overscanCount":A,"onScroll":Object(j.a)(x,(function handleScroll(e){return _handleScroll.apply(this,arguments)}))},W),J))}var K=n(305),z=n(150);n(244);n.d(t,"default",(function(){return ListViewExample}));var V=Array(1e3).fill(null).map((function(e,t){return{"id":t,"text":"Item ".concat(t)}}));function ListViewExample(){var e=Object(o.useState)(0),t=Object(c.a)(e,2),n=t[0],f=t[1],d=Object(o.useState)(Array(20).fill(null).map((function(e,t){return{"id":t,"text":"Item ".concat(t)}}))),m=Object(c.a)(d,2),v=m[0],b=m[1],g=Object(o.useState)(!1),h=Object(c.a)(g,2),O=h[0],j=h[1];return Object(o.useEffect)((function(){j(!1)}),[v]),i.a.createElement(l.a,{"className":"page"},i.a.createElement(u.a,{"className":"header"},"ListView 长列表"),i.a.createElement(s.a,{"values":["固定高度","底部加载","跟随页面"],"value":n,"onChange":function onChange(e){return f(e)}}),0===n&&i.a.createElement(ListView,{"height":500,"itemSize":64,"itemData":V,"itemKey":function itemKey(e){return e.id},"itemRender":function itemRender(e){e.index;var t=e.style,n=e.data;e.isScrolling;return i.a.createElement(K.a.Item,{"title":n.id,"style":Object(r.a)(Object(r.a)({},t),{},{"marginTop":0}),"description":n.text})}}),1===n&&i.a.createElement(ListView,{"height":500,"itemSize":64,"itemData":v,"itemKey":function itemKey(e){return e.id},"itemRender":function itemRender(e){e.index;var t=e.style,n=e.data;e.isScrolling;return i.a.createElement(K.a.Item,{"title":n.id,"style":Object(r.a)(Object(r.a)({},t),{},{"marginTop":0}),"description":n.text})},"onScrollBottom":function onScrollBottom(){O||(j(!0),setTimeout((function(){b((function(e){return[].concat(Object(a.a)(e),Object(a.a)(Array(20).fill(null).map((function(t,n){return{"id":n+e.length,"text":"Item ".concat(n+e.length)}}))))}))}),1e3))},"footer":O&&i.a.createElement(l.a,{"className":"demo-loading"},i.a.createElement(z.a,null,"加载中 ..."))}),2===n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{"className":"header","style":{"textAlign":"center","position":"sticky","top":0,"backgroundColor":"#ddd","zIndex":1}},"Taro 暂不支持该特性"),i.a.createElement(ListView,{"usePageScroll":!0,"itemSize":64,"itemData":V,"itemKey":function itemKey(e){return e.id},"itemRender":function itemRender(e){e.index;var t=e.style,n=e.data;e.isScrolling;return i.a.createElement(K.a.Item,{"title":n.id,"style":Object(r.a)(Object(r.a)({},t),{},{"marginTop":0}),"description":n.text})}})))}}}]);